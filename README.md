# Project_Jump_And_Shoot
TUKorea Smartphone Game Programming Term Project

# 게임 컨셉
Jump And Shoot은 양 옆에서 다가오는 몬스터들을 총으로 쏘며 점프하는 게임이다.

플레이어는 화면의 왼쪽 또는 오른쪽을 터치하여, 터치한 방향으로 총을 발사하여 몬스터를 처치할 수 있다.  
이 때 플레이어는 총을 발사한 방향의 반대 방향으로 점프를 하게 되며, 점프 후 착지하기 전 까지는 총을 발사할 수 없다.  
게임 시작 시 플레이어는 맵 중앙에 위치하게 되며, 플레이어가 맵 중앙에 위치한 상태에서 오른쪽 또는 왼쪽으로 총 2번 점프하여 이동할 수 있다.  
만약 플레이어가 맵의 끝으로 가면 더 이상 총을 발사하거나 이동할 수 없게된다.  

# 개발 범위
### 충돌 처리
이 게임에서의 핵심 개발 요소는 충돌처리이다. '플레이어 - 몬스터' 충돌과, '플레이어가 발사한 총알 - 몬스터' 충돌 처리가 칠요하다.  
기획한 게임 특성 상 오브젝트가 회전하지 않으므로, AABB(Axis-Aligned Bounding Box)만으로 충분하다. AABB는 오브젝트가 가지는 4개의 꼭짓점 위치만 비교하면 되기 때문에 하드웨어 성능 여유가 부족한 임베디드 환경에서 빠르게 충돌 처리가 가능할 것이다.

### 터치 이벤트 처리
플레이어가 총을 쏘고 점프하기 위해서는, 화면에 터치 이벤트 처리가 필요하고, 또한 터치된 방향을 알아내야 한다. 터치 방향은 화면 중심을 기준으로 왼쪽이면 왼쪽, 오른쪽이면 오른쪽으로 처리되도록 할 것이다.

### 연출 효과
플레이어가 총을 발사하거나, 플레이어가 바닥에 착지할 때 좀 더 실감나는 느낌을 주기 위해 연출 기법을 구현할 계획이다. lerp(선형보간), sin(삼각함수)등 여러 수학적 기법을 사용하여 다양한 연출을 추가할 것이다.  
예를 들어 플레이어가 숨을 쉬는 애니메이션은 sin함수를 통해 스프라이트가 조금씩 위 아래로 늘어났다 줄어들었다 하는 식으로 구현할 수 있다.

# 게임의 흐름
### 전체 게임루프 흐름
![Image](https://github.com/user-attachments/assets/14f45a7d-e4c7-4ee4-aad5-9d22d768391b)

### 게임 플레이
![Image](https://github.com/user-attachments/assets/325cff75-7c86-4c09-a024-5a9c4f4e2aeb)

# 개발 일정
### 1주차
기초 게임 프레임워크 구축 및 필요 리소스 확보

### 2주차
게임 모드 전환 시스템 구축  
수학 연산 모듈 구축(선형 보간, 거리 측정, 삼각 함수 등)

### 3주차
플레이 모드(Play Mode)에 필요한 객체 클래스 및 뷰 구현  
터치 이벤트 처리

### 4주차
'플레이어 - 몬스터' 충돌과 '플레이어 총알 - 몬스터' 충돌 처리 구현  
해당 충돌처리를 위한 AABB 시스템 구축(디버그 빌드 시 AABB 영역이 표시되는 것도 포함)

### 5주차
메인 모드인 플레이 모드 구현

### 6주차
타이틀 모드, 일시정지 모드 등 다른 모드들을 구현

### 7주차
UI 다듬기, 사운드 추가 및 유저 데이터 처리 시스템 구축

### 8주차
성능 최적화 및 디버깅




# 2차 발표 자료
## 게임 컨셉
플레이어를 좌, 우로 움직이여 좌우에서 몰려드는 적을 처치하는 게임

## 커밋 현황
<img width="665" alt="Image" src="https://github.com/user-attachments/assets/0a92349c-3b49-43b2-bd70-f0bfed603d4d" />

## 진행 상황 (완료된 것들)
기초 게임 프레임워크 구축 및 필요 리소스 확보  
터치 이벤트 처리  

## MainScene에 등장하는 GameObject(구현된 것들)
### Player
![Image](https://github.com/user-attachments/assets/cf407552-5422-40d3-9c1e-bc14918591f0)
  
상호작용 구성: 스크린 좌, 우 터치  
좌측 터치 시 우측 이동, 우측 터치 시 좌측 이동한다.

inputEvent(int touchType)  
플레이어가 받는 터치 이벤트이다. MainScene에서 터치 이벤트가 발생하면 이 함수 파라미터에 0 또는 1을 전달한다.  
0은 스크린 좌측 터치, 1은 스크린 우측 터치로 인식하도록 되어있다.  

# 3차 발표 자료  
## 간단 소개  
플레이어를 좌, 우로 움직이여 좌우에서 몰려드는 적을 처치하는 게임  
  
## 커밋 로그 
<img width="818" alt="Image" src="https://github.com/user-attachments/assets/1ded8489-3895-4718-a756-6eaf5070bb6e" />  
  
## 개발 진행 현황  
기초 게임 프레임워크 구축 및 필요 리소스 확보 - 완료  

게임 모드 전환 시스템 구축 - 완료  

수학 연산 모듈 구축(선형 보간, 거리 측정, 삼각 함수 등) - 게임 특성 상 크게 필요하지 않다고 판단되어 해당 항목은 생략  

플레이 모드(Play Mode)에 필요한 객체 클래스 및 뷰 구현 - 완료  

터치 이벤트 처리 - 완료  

'플레이어 - 몬스터' 충돌과 '플레이어 총알 - 몬스터' 충돌 처리 구현 - 완료  

해당 충돌처리를 위한 AABB 시스템 구축(디버그 빌드 시 AABB 영역이 표시되는 것도 포함) - 완료  

메인 모드인 플레이 모드 구현 - 완료  

타이틀 모드, 일시정지 모드 등 다른 모드들을 구현 - 완료  

UI 다듬기, 사운드 추가 및 유저 데이터 처리 시스템 구축 - 완료  
 
성능 최적화 및 디버깅 - 완료  

## 사용 기술  
### sound pre-loading  
수업 때 사용했던 프레임워크의 문제점 중 하나는 사운드 최초 재생 시 비동기 로드로 인해 딜레이가 발생한다는 것이다.  
이러한 딜레이를 해결하기 위해, 게임 뷰를 실행할 때 사운드를 모두 미리 로드하는 방식으로 해당 문제를 해결하였다.  
자주 재생되는 효과음이라면 큰 문제는 없지만, 자주 재생되지 않는 효과음의 경우 재생 누락이 발생할 수 있기 때문에 pre-loading을 하였다.

### SharedPreferences
이 게임에서 사용하는 데이터는 하이스코어(int형 데이터) 단 하나이기 때문에, 간단한 데이터를 앱 내에 저장할 수 있는 SharedPreferences를 사용하였다.  
타이틀 화면에서 Reset Data 버튼을 누르면 하이스코어가 초기화되도록 하였다.

## 참고한 것
### 스마트폰 게임 프로그래밍 프레임워크  
이 게임은 수업 시간 때 진행했던 쿠키런 프레임워크를 기반으로 개발되었다.  
가로 화면에 최적화 되어있기 때문에 가로 화면 게임을 개발하기에 알맞다.  
  
## 직접 개발한 것
### sin-animation  
몬스터, 캐릭터 스프라이트에 sin 함수 기반 애니메이션을 사용하여 생동감을 더했다. sin 그래프의 높이가 -1 ~ 1 을 반복한다는 점을 이용한 원리로,  
sin() 결과값에 특정 값을 곱해주면 마치 숨을 쉬는 듯한 움직임을 구현할 수 있다.

### camera shaking  
특정 이벤트(플레이어 점프 등)가 발생할 때 카메라 객체에 흔들림 값을 추가하여 화면 흔들림을 구현하였다.  
흔들림 값을 추가해주면 카메라 객체는 값에 1또는 -1을 곱하여 랜덤으로 흔들림을 만들어 낸다.  
흔들림 값은 시간이 지나면 점차 줄어들며, 선형 보간을 사용해 흔들림이 부드럽게 줄어들도록 하였다.  

## 아쉬운 점  
### 게임 연출  
원래 현재 개발한 것 보다 더 화려한 연출을 계획했지만, 졸업 작품으로 인해 어느정도 생략되었다. 본래 총기 불꽃, 탄피 등 여러 요소를 계획했었다.  

## 해결하지 못한 문제  
### 배경 음악 재생 문제
배경 음악이 재생되는 상황에서 홈 버튼을 눌러 홈 화면으로 나가면 배경 음악 재생이 계속되는 문제가 있다. 뒤로가기 버튼이나 메뉴 버튼의 경우 운영체제에서 메시지를 제공하지만, 홈버튼 메시지는 보안 상의 이유로 제공하지 않는다고 한다.  
때문에 홈버튼 메시지를 감지할 수 있는 여러 방법들을 찾아보았으나 뾰족한 방법을 찾지 못했다.  

## 판매를 위해 개선할 것들
### UI 디자인  
현재 게임의 UI는 상당히 단순하고 기본적은 형태로만 존재하며, 디자인 요소라는 것이 없는 것이나 마찬가지다.  
판매를 위해서는 UI디자인을 게임 컨셉에 맞게 다자인할 필요가 있을 것이다.  

### 멀티 플랫폼  
최근들어, 프로그램을 개발할 때 하나의 플랫폼에 종속되지 않고 멀티 플랫폼(크로스 플랫폼)으로 개발하는 것이 트렌드가 되었다.  
많은 판매 수익을 위해서는 안드로이드 버전을 넘어, ios 버전도 개발할 필요가 있을 것이다.  

## 프로젝트를 진행하면서 겪었던 어려움
### 익숙하지 못한 문법  
원래 본인은 거의 c++만을 사용하여 프로그래밍을 해오다가, 이번 수업을 통해 자바를 접하게 되었다.  
자바의 문법적 특성이 c++과 많이 달라, 초반에는 c++에서 가능했던 문법이 자바에서는 불가능하여 상당히 혼란을 겪었다.  
특히 포인터를 사용할 수 없는 것이 가장 불편했던 요소 중 하나였다.  

## 이번 수업에서 기대한 것, 얻은 것, 얻지 못한 것  
### 기대한 것  
스마트폰 게임 프로그래밍을 통해 실제로 스마트폰에서 구동되는 게임을 개발해보는 것을 기대하였다.  

### 얻은 것  
안드로이드 게임 프로그래밍 기술을 습득하게 되었다.  
어쩌다가 안드로이드 앱을 개발할 일이 생간다면 이 수업에서 제작한 프레임워크를 사용할 계획이다.  

### 얻지 못한 것  
본인은 아이폰 유저인데, 아이폰 게임 프로그래밍을 해보지 못하여 이 부분이 상당히 아쉬었다.  
다만 ios앱의 경우 imac이 없으면 개발 자체가 불가능하다는 점은 알고 있다.  

## 더 좋은 수업을 위해 변화할 점
### 코틀린 기반 수업 내용으로 전환 
최근 자바에 대한 잡음이 상당히 많이 들려온다. 특히 오라클이 가지는 자바 라이센스 관련한 문제가 많이 보이는데, 구글 - 오라클 소송이 라이센스 문제 사례중 가장 유명하다. 이러한 문제 때문에 최근에는 안드로이드 앱을 개발할 때 코틀린으로 점차 옮겨가는 추세이다.  
또한 언어적 면에서도 자바에 비해 더 우수한데, 타이핑 양이 많은 자바와 달리 코틀린의 경우 '타이핑을 줄인 자바'를 목표로 개발되었기 때문에 문법이 더 단순하다.  
자바의 문법 중 대부분이 코틀린과 호환되도록 개발되었기 때문에 자바에서 코틀린으로의 전한도 타 언어에 비해 쉬운 편이다.  
이러한 이유로, 최신 트렌드를 따라가는 코틀린을 기반으로 수업을 진행하면 더욱 좋을 것 같다.  
